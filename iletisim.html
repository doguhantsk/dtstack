<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTStack | İletişim</title>
    <link rel="icon" href="assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/favicon-192.png">
    <link rel="icon" type="image/png" sizes="64x64" href="assets/favicon-64.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon-180.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="stars"></div>
    <div class="glow-spot gs-1"></div>

    <nav>
        <div class="logo"><div class="logo-icon"></div>DTStack</div>
        <div class="nav-links">
            <a href="index.html" class="nav-link">Ana Sayfa</a>
            <a href="hizmetler.html" class="nav-link">Hizmetler</a>
            <a href="projeler.html" class="nav-link">Projeler</a>
            <a href="market.html" class="nav-link">Özel Yazılım</a>
            <a href="hakkimizda.html" class="nav-link">Hakkımızda</a>
        </div>
        <a href="iletisim.html" class="btn-shiny" style="background: white; color: black; border:none;">Bize Yazın</a>

        <div class="hamburger" onclick="toggleMenu()">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
    </nav>

    <div class="mobile-nav-overlay" id="mobileMenu">
        <a href="index.html" class="mobile-link">Ana Sayfa</a>
        <a href="hizmetler.html" class="mobile-link">Hizmetler</a>
        <a href="projeler.html" class="mobile-link">Projeler</a>
        <a href="hakkimizda.html" class="mobile-link">Hakkımızda</a>
        <a href="market.html" class="mobile-link">Özel Yazılım</a>
        <a href="iletisim.html" class="btn-shiny" style="font-size: 1.5rem; padding: 15px 40px;">İletişime Geç</a>
    </div>

    <header class="page-header" style="position: relative;">
        <div class="tag">İLETİŞİM</div>
        <h1 class="glitch-text" data-text="PROJENİ BAŞLAT.">PROJENİ BAŞLAT.</h1>
        <p>Aklındaki fikri duymak için sabırsızlanıyoruz.</p>
    </header>

    <section style="max-width: 1200px; margin: 0 auto; padding: 50px 5% 100px; position: relative;">
        
        <div class="map-bg"></div>

        <div class="contact-layout-wrapper">
            
            <div class="contact-info-side">
                <h2 style="font-size: 2rem; margin-bottom: 30px; color: white;">Bize Ulaşın</h2>
                
                <div class="contact-cards">
                    <div class="c-card">
                        <div class="cc-icon"><i class="fa-regular fa-envelope"></i></div>
                        <h4>Mail</h4>
                        <p>Doguhantskn06@gmail.com</p>
                    </div>
                    <div class="c-card">
                        <div class="cc-icon"><i class="fa-brands fa-whatsapp"></i></div>
                        <h4>WhatsApp</h4>
                        <p>+90 530 490 2005</p>
                    </div>
                </div>

                <div style="background: rgba(255,255,255,0.03); padding: 30px; border-radius: 20px; border: 1px solid var(--border);">
                    <h3 style="color:white; margin-bottom:10px;">Ankara Ofis</h3>
                    <p style="color:var(--text-muted);">
                        Ankara Çankaya<br>
                        Ankara, Türkiye
                    </p>
                </div>
            </div>

            <div class="contact-form-side">
                
                <form id="contactForm">
                    
                    <div class="input-group">
                        <input type="text" id="name" class="cyber-input" required>
                        <label class="input-label">Adınız Soyadınız</label>
                    </div>

                    <div class="input-group">
                        <input type="email" id="email" class="cyber-input" required>
                        <label class="input-label">E-Posta Adresi</label>
                    </div>

                    <div class="input-group">
                        <select id="projectType" class="cyber-input" style="color: var(--text-muted);">
                            <option value="genel">Proje Türü Seçin</option>
                            <option value="start">Start Paketi (Landing)</option>
                            <option value="business">Business Paketi (Kurumsal)</option>
                            <option value="ecommerce">E-Commerce Paketi (E-Ticaret)</option>
                            <option value="ozel">Özel Proje</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <input type="text" id="budget" class="cyber-input">
                        <label class="input-label">Bütçe Aralığı (Opsiyonel)</label>
                    </div>

                    <div class="input-group">
                        <textarea id="message" class="cyber-input" style="height: 100px; resize: none;" required></textarea>
                        <label class="input-label">Projenizden Bahsedin</label>
                    </div>

                    <button type="submit" class="btn-shiny" style="width: 100%; padding: 15px; font-size: 1.1rem; border: none; cursor: pointer; background: var(--accent-primary);">
                        Gönder <i class="fa-solid fa-paper-plane" style="margin-left: 10px;"></i>
                    </button>
                </form>

            </div>

        </div>
    </section>

    <footer>
        <p>© 2026 DTStack. Tüm hakları saklıdır.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script src="assets/emailjs-keys.js"></script>
    <script>
        // Initialize EmailJS if public key provided
        if (typeof emailjs !== 'undefined' && window.EMAILJS_PUBLIC_KEY) {
            try { emailjs.init(window.EMAILJS_PUBLIC_KEY); } catch (e) { console.warn('EmailJS init failed', e); }
        }

    </script>

    <script>
        // MOBİL MENÜ FONKSİYONU
        function toggleMenu() {
            const hamburger = document.querySelector('.hamburger');
            const menu = document.getElementById('mobileMenu');
            hamburger.classList.toggle('active');
            menu.classList.toggle('active');
        }

        document.querySelectorAll('.mobile-link').forEach(link => {
            link.addEventListener('click', () => {
                toggleMenu();
            });
        });

        // 1. Sayfa Yüklendiğinde Paket Seçimi
        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const paket = urlParams.get('paket');
            
            const selectBox = document.getElementById('projectType');
            const messageBox = document.getElementById('message');

            if(paket) {
                // Select kutusunu güncelle
                selectBox.value = paket;
                
                // Mesaj kutusunu doldur ve efekt ver
                if(paket === 'start') {
                    messageBox.value = "Merhaba, Start Paketi hakkında detaylı bilgi almak istiyorum.";
                } else if(paket === 'business') {
                    messageBox.value = "Merhaba, Business (Kurumsal) paketinizle ilgileniyorum.";
                } else if(paket === 'ecommerce') {
                    messageBox.value = "Merhaba, E-Ticaret paketiyle ilgileniyorum. Mağaza açmak istiyorum.";
                }
                
                // Label'ın yukarı kayması için focus yap
                messageBox.focus();
            }
        });

        // 2. Form Gönderildiğinde EmailJS ile Gönderim
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const type = document.getElementById('projectType').options[document.getElementById('projectType').selectedIndex].text;
            const budget = document.getElementById('budget').value;
            const message = document.getElementById('message').value;

            const serviceID = window.EMAILJS_SERVICE_ID || '';
            const templateIDOwner = window.EMAILJS_TEMPLATE_ID_OWNER || '';
            const templateIDAuto = window.EMAILJS_TEMPLATE_ID_AUTOREPLY || '';

            const params = {
                from_name: name,
                from_email: email,
                user_email: email,
                reply_to: email,
                to_email: email,
                project_type: type,
                budget: budget,
                message: message
            };

            const sendBtn = this.querySelector('button[type="submit"]');
            const originalBtnHtml = sendBtn.innerHTML;
            sendBtn.disabled = true;
            sendBtn.textContent = 'Gönderiliyor...';

            if (typeof emailjs !== 'undefined' && serviceID && templateIDOwner) {
                // 1) Send to site owner
                emailjs.send(serviceID, templateIDOwner, params)
                    .then(() => {
                        // 2) Send auto-reply to user (if configured)
                        if (templateIDAuto && email) {
                            const replyParams = {
                                to_name: name,
                                to_email: email,
                                to_email_address: email,
                                to_name_display: name,
                                from_name: 'DTStack',
                                from_email: window.EMAILJS_FROM_EMAIL || 'noreply@yourdomain.com',
                                project_type: type,
                                message: message
                            };
                            emailjs.send(serviceID, templateIDAuto, replyParams)
                                .then(() => {
                                    alert('Mesaj başarıyla gönderildi. Teşekkürler! (Otomatik cevap gönderildi)');
                                    document.getElementById('contactForm').reset();
                                    sendBtn.disabled = false;
                                    sendBtn.innerHTML = originalBtnHtml;
                                }, (err) => {
                                    console.warn('Auto-reply failed', err);
                                    console.warn('Auto-reply error details:', err && err.status, err && err.text ? err.text : err);
                                    alert('Mesajınız gönderildi, ancak otomatik cevap gönderilemedi.');
                                    document.getElementById('contactForm').reset();
                                    sendBtn.disabled = false;
                                    sendBtn.innerHTML = originalBtnHtml;
                                });
                        } else {
                            alert('Mesaj başarıyla gönderildi. Teşekkürler!');
                            document.getElementById('contactForm').reset();
                            sendBtn.disabled = false;
                            sendBtn.innerHTML = originalBtnHtml;
                        }
                    }, (err) => {
                        console.error('EmailJS error', err);
                        alert('Gönderim başarısız oldu. Lütfen daha sonra tekrar deneyin.');
                        sendBtn.disabled = false;
                        sendBtn.innerHTML = originalBtnHtml;
                    });
            } else {
                // Fallback to mailto if EmailJS not configured
                const myEmail = "doguhan@gmail.com"; // fallback address
                const subject = "DTStack - Yeni Proje Talebi: " + name;
                const body = `Ad Soyad: ${name}%0D%0AProje Türü: ${type}%0D%0ABütçe: ${budget}%0D%0A-----------------------%0D%0AMesaj:%0D%0A${message}`;
                window.location.href = `mailto:${myEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                sendBtn.disabled = false;
                sendBtn.innerHTML = originalBtnHtml;
            }
        });
    </script>

</body>
</html>
